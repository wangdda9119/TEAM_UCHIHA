# React AI Agent & Tavily ì›¹ ê²€ìƒ‰ ê°€ì´ë“œ

ReAct (Reasoning + Acting) íŒ¨í„´ì„ ì‚¬ìš©í•œ ì§€ëŠ¥í˜• AI ì—ì´ì „íŠ¸ì™€ Tavily ì›¹ ê²€ìƒ‰ ë„êµ¬ë¥¼ í†µí•©í•œ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

## ğŸ“‹ ëª©ì°¨

1. [ê°œìš”](#ê°œìš”)
2. [ì•„í‚¤í…ì²˜](#ì•„í‚¤í…ì²˜)
3. [ì„¤ì •](#ì„¤ì •)
4. [API ì‚¬ìš©](#api-ì‚¬ìš©)
5. [í”„ë¡ íŠ¸ì—”ë“œ ì‚¬ìš©](#í”„ë¡ íŠ¸ì—”ë“œ-ì‚¬ìš©)
6. [ì˜ˆì œ](#ì˜ˆì œ)
7. [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)

---

## ğŸ¯ ê°œìš”

### ReAct íŒ¨í„´ì´ë€?

**ReAct (Reasoning + Acting)**ëŠ” AI ì—ì´ì „íŠ¸ê°€ ìƒê°(Thought)ê³¼ í–‰ë™(Action)ì„ ë°˜ë³µí•˜ë©´ì„œ ë³µì¡í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” íŒ¨í„´ì…ë‹ˆë‹¤.

```
ì‚¬ìš©ì ì§ˆë¬¸
    â†“
Thought (ìƒê°): "ì´ ì§ˆë¬¸ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ë­˜ í•´ì•¼ í• ê¹Œ?"
    â†“
Action (í–‰ë™): "ì›¹ì—ì„œ ê²€ìƒ‰í•´ì•¼ê² ë‹¤"
    â†“
Action Input: "ê²€ìƒ‰ ì¿¼ë¦¬"
    â†“
Observation (ê´€ì°°): "ê²€ìƒ‰ ê²°ê³¼ ë¶„ì„"
    â†“
ë°˜ë³µ... (í•„ìš”ì‹œ)
    â†“
Final Answer (ìµœì¢… ë‹µë³€)
```

### ì§€ì›ë˜ëŠ” ë„êµ¬

- ğŸ” **ì›¹ ê²€ìƒ‰** (Tavily API)
- ğŸ§® **ê³„ì‚°ê¸°** (ê¸°ë³¸ ìˆ˜ì‹ ê³„ì‚°)

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

### ë°±ì—”ë“œ êµ¬ì¡°

```
backend/
â”œâ”€â”€ ai/
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â””â”€â”€ react_agent.py         # ReAct ì—ì´ì „íŠ¸
â”‚   â””â”€â”€ tools/
â”‚       â””â”€â”€ search/
â”‚           â””â”€â”€ web_search.py      # Tavily ì›¹ ê²€ìƒ‰ ë„êµ¬
â””â”€â”€ api/v1/routes/
    â””â”€â”€ agent.py                   # ì—ì´ì „íŠ¸ API ì—”ë“œí¬ì¸íŠ¸
```

### í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì¡°

```
team_uchiha/src/
â””â”€â”€ components/
    â””â”€â”€ AgentInterface.vue         # AI Agent UI
```

---

## âš™ï¸ ì„¤ì •

### 1. Tavily API í‚¤ ì–»ê¸°

Tavily ì›¹ì‚¬ì´íŠ¸ì—ì„œ ë¬´ë£Œ API í‚¤ë¥¼ ë°›ìœ¼ì„¸ìš”:
https://tavily.com

### 2. .env íŒŒì¼ ì„¤ì •

```env
# .env íŒŒì¼ì— ì¶”ê°€
TAVILY_API_KEY=tvly-YOUR_TAVILY_API_KEY_HERE
OPENAI_API_KEY=sk-proj-YOUR_OPENAI_KEY
```

### 3. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
pip install -r requirements.txt
```

í•„ìš”í•œ íŒ¨í‚¤ì§€:
- `httpx>=0.27.0` - HTTP í´ë¼ì´ì–¸íŠ¸ (Tavily API í˜¸ì¶œìš©)
- `langchain-openai>=0.1.0`
- `openai>=1.51`

### 4. ì„œë²„ ì‹œì‘

```bash
# ë°±ì—”ë“œ
python -m backend.app.main

# í”„ë¡ íŠ¸ì—”ë“œ (ìƒˆ í„°ë¯¸ë„)
cd team_uchiha
npm run dev
```

---

## ğŸŒ API ì‚¬ìš©

### Base URL
```
http://localhost:8000/api/v1/agent
```

### 1. ì—ì´ì „íŠ¸ ì‹¤í–‰

**ì—”ë“œí¬ì¸íŠ¸:** `POST /run`

**ìš”ì²­:**
```bash
curl -X POST http://localhost:8000/api/v1/agent/run \
  -H "Content-Type: application/json" \
  -d '{
    "question": "íŒŒì´ì¬ ìµœì‹  ë²„ì „ì€ ë¬´ì—‡ì¸ê°€?",
    "max_iterations": 5
  }'
```

**ì‘ë‹µ:**
```json
{
  "question": "íŒŒì´ì¬ ìµœì‹  ë²„ì „ì€ ë¬´ì—‡ì¸ê°€?",
  "answer": "íŒŒì´ì¬ì˜ ìµœì‹  ë²„ì „ì€ 3.12.1ì…ë‹ˆë‹¤...",
  "iterations": 3,
  "status": "success",
  "memory": [
    {
      "timestamp": "2025-01-01T10:00:00",
      "type": "agent_step",
      "iteration": 0,
      "thought": "íŒŒì´ì¬ ìµœì‹  ë²„ì „ ì •ë³´ê°€ í•„ìš”í•˜ë‹¤",
      "action": "ì›¹ ê²€ìƒ‰",
      "action_input": "íŒŒì´ì¬ ìµœì‹  ë²„ì „"
    },
    ...
  ]
}
```

### 2. ì›¹ ê²€ìƒ‰

**ì—”ë“œí¬ì¸íŠ¸:** `POST /search`

**ìš”ì²­:**
```bash
curl -X POST http://localhost:8000/api/v1/agent/search \
  -H "Content-Type: application/json" \
  -d '{
    "query": "AI ìµœì‹  ë‰´ìŠ¤",
    "max_results": 5
  }'
```

**ì‘ë‹µ:**
```json
{
  "query": "AI ìµœì‹  ë‰´ìŠ¤",
  "results": [
    {
      "title": "AI ë‰´ìŠ¤ ì œëª©",
      "url": "https://example.com",
      "content": "ë‰´ìŠ¤ ë‚´ìš©...",
      "score": 0.95
    },
    ...
  ],
  "total_results": 5,
  "status": "success"
}
```

### 3. ë©”ëª¨ë¦¬ ì¡°íšŒ

**ì—”ë“œí¬ì¸íŠ¸:** `GET /memory`

```bash
curl http://localhost:8000/api/v1/agent/memory
```

**ì‘ë‹µ:**
```json
{
  "memory_count": 10,
  "memory": [
    {
      "timestamp": "2025-01-01T10:00:00",
      "type": "agent_step",
      "iteration": 0,
      "thought": "...",
      "action": "...",
      "action_input": "..."
    },
    ...
  ],
  "status": "success"
}
```

### 4. ë©”ëª¨ë¦¬ ì´ˆê¸°í™”

**ì—”ë“œí¬ì¸íŠ¸:** `DELETE /memory`

```bash
curl -X DELETE http://localhost:8000/api/v1/agent/memory
```

### 5. ì‚¬ìš© ê°€ëŠ¥í•œ ë„êµ¬ ëª©ë¡

**ì—”ë“œí¬ì¸íŠ¸:** `GET /tools`

```bash
curl http://localhost:8000/api/v1/agent/tools
```

**ì‘ë‹µ:**
```json
{
  "tools": [
    {
      "name": "ì›¹ ê²€ìƒ‰",
      "description": "ì¸í„°ë„·ì—ì„œ ì •ë³´ë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤",
      "tool_id": "web_search"
    },
    {
      "name": "ê³„ì‚°ê¸°",
      "description": "ìˆ˜í•™ ì—°ì‚°ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤",
      "tool_id": "calculator"
    }
  ],
  "total_tools": 2,
  "status": "success"
}
```

### 6. í—¬ìŠ¤ ì²´í¬

**ì—”ë“œí¬ì¸íŠ¸:** `GET /health`

```bash
curl http://localhost:8000/api/v1/agent/health
```

---

## ğŸ’» í”„ë¡ íŠ¸ì—”ë“œ ì‚¬ìš©

### ì£¼ìš” ê¸°ëŠ¥

1. **ëŒ€í™” ì¸í„°í˜ì´ìŠ¤**
   - ì‚¬ìš©ìì™€ ì—ì´ì „íŠ¸ì˜ ëŒ€í™” í‘œì‹œ
   - ì‹¤ì‹œê°„ ë©”ì‹œì§€ ì—…ë°ì´íŠ¸
   - íƒ€ì„ìŠ¤íƒ¬í”„ í‘œì‹œ

2. **ë„êµ¬ ëª©ë¡**
   - ì‚¬ìš© ê°€ëŠ¥í•œ ë„êµ¬ í‘œì‹œ
   - ë„êµ¬ì˜ ì„¤ëª… ì œê³µ

3. **ì„¤ì •**
   - ìµœëŒ€ ë°˜ë³µ íšŸìˆ˜ ì¡°ì •
   - ë©”ëª¨ë¦¬ í¬ê¸° í‘œì‹œ
   - ë©”ëª¨ë¦¬ ì´ˆê¸°í™” ë²„íŠ¼

4. **ë¹ ë¥¸ ì§ˆë¬¸**
   - ë¯¸ë¦¬ ì •ì˜ëœ ì§ˆë¬¸ ë²„íŠ¼
   - í•œ í´ë¦­ìœ¼ë¡œ ì§ˆë¬¸ ì „ì†¡

5. **ë©”ëª¨ë¦¬ ë·°ì–´**
   - ì—ì´ì „íŠ¸ì˜ ì‚¬ê³  ê³¼ì • í™•ì¸
   - ê° ë‹¨ê³„ì˜ Thought, Action, Observation í‘œì‹œ

### ì‚¬ìš©ë²•

1. **ì§ˆë¬¸ ì…ë ¥**
   - í…ìŠ¤íŠ¸ ì˜ì—­ì— ì§ˆë¬¸ ì…ë ¥
   - "ì „ì†¡" ë²„íŠ¼ í´ë¦­ ë˜ëŠ” Ctrl+Enter ëˆ„ë¥´ê¸°

2. **ì—ì´ì „íŠ¸ ëŒ€ê¸°**
   - ì—ì´ì „íŠ¸ê°€ ìƒê°(Thought)ê³¼ í–‰ë™(Action)ì„ ìˆ˜í–‰
   - ë¡œë”© ìŠ¤í”¼ë„ˆ í‘œì‹œ

3. **ê²°ê³¼ í™•ì¸**
   - ìµœì¢… ë‹µë³€ í‘œì‹œ
   - ë°˜ë³µ íšŸìˆ˜ í‘œì‹œ

4. **ë©”ëª¨ë¦¬ í™•ì¸**
   - ğŸ“ ë©”ëª¨ë¦¬ ë³´ê¸° ë²„íŠ¼ìœ¼ë¡œ ìƒì„¸ ê³¼ì • í™•ì¸

---

## ğŸ“š ì˜ˆì œ

### ì˜ˆì œ 1: ì›¹ ê²€ìƒ‰ ì§ˆë¬¸

**ì§ˆë¬¸:**
```
"í˜„ì¬ AI ì—…ê³„ì˜ ìµœì‹  ë‰´ìŠ¤ëŠ”?"
```

**ì—ì´ì „íŠ¸ ì²˜ë¦¬ ê³¼ì •:**
1. Thought: "í˜„ì¬ AI ë‰´ìŠ¤ë¥¼ ì•Œì•„ì•¼ í•œë‹¤"
2. Action: ì›¹ ê²€ìƒ‰
3. Observation: ê²€ìƒ‰ ê²°ê³¼ ë¶„ì„
4. Final Answer: ì •ë³´ ì œê³µ

### ì˜ˆì œ 2: ìˆ˜í•™ ê³„ì‚°

**ì§ˆë¬¸:**
```
"2ì˜ 100ìŠ¹ì€ ëª‡ì¸ê°€?"
```

**ì—ì´ì „íŠ¸ ì²˜ë¦¬ ê³¼ì •:**
1. Thought: "ìˆ˜í•™ ê³„ì‚°ì´ í•„ìš”í•˜ë‹¤"
2. Action: ê³„ì‚°ê¸°
3. Observation: 1267650600228229401496703205376
4. Final Answer: ê²°ê³¼ ì œê³µ

### ì˜ˆì œ 3: ë³µí•© ì§ˆë¬¸

**ì§ˆë¬¸:**
```
"íŒŒì´ì¬ì˜ ìµœì‹  ë²„ì „ì€ ëª‡ì´ê³ , ê·¸ ì£¼ìš” ê¸°ëŠ¥ì€ ë­”ê°€?"
```

**ì—ì´ì „íŠ¸ ì²˜ë¦¬ ê³¼ì •:**
1. Thought: "íŒŒì´ì¬ ë²„ì „ ì •ë³´ì™€ ê¸°ëŠ¥ì´ í•„ìš”í•˜ë‹¤"
2. Action: ì›¹ ê²€ìƒ‰
3. Observation: "íŒŒì´ì¬ 3.12" ì •ë³´ íšë“
4. ë‹¤ì‹œ Thought: "3.12ì˜ ì£¼ìš” ê¸°ëŠ¥ì„ ì¢€ ë” ì•Œì•„ì•¼ í•œë‹¤"
5. Action: ë‹¤ì‹œ ì›¹ ê²€ìƒ‰
6. Observation: ê¸°ëŠ¥ ì •ë³´ íšë“
7. Final Answer: ì¢…í•© ì •ë³´ ì œê³µ

---

## ğŸ› íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ 1: TAVILY_API_KEY ì—ëŸ¬

```
ValueError: TAVILY_API_KEYê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤
```

**í•´ê²°:**
1. Tavily ì›¹ì‚¬ì´íŠ¸ì—ì„œ API í‚¤ íšë“
2. `.env` íŒŒì¼ì— ì¶”ê°€: `TAVILY_API_KEY=tvly-...`
3. ì„œë²„ ì¬ì‹œì‘

### ë¬¸ì œ 2: ì—ì´ì „íŠ¸ê°€ ì‘ë‹µí•˜ì§€ ì•ŠìŒ

```
OpenAI API ì˜¤ë¥˜ ë˜ëŠ” íƒ€ì„ì•„ì›ƒ
```

**í•´ê²°:**
- OPENAI_API_KEY í™•ì¸
- API í• ë‹¹ëŸ‰ í™•ì¸
- ì¸í„°ë„· ì—°ê²° í™•ì¸
- `max_iterations` ê°’ ì¤„ì´ê¸°

### ë¬¸ì œ 3: ì›¹ ê²€ìƒ‰ ì‹¤íŒ¨

```
Tavily API ì˜¤ë¥˜
```

**í•´ê²°:**
- API í‚¤ ìœ íš¨ì„± í™•ì¸
- Tavily ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
- ê²€ìƒ‰ ì¿¼ë¦¬ ë‹¤ì‹œ ì‹œë„

### ë¬¸ì œ 4: ë©”ëª¨ë¦¬ ë¶€ì¡±

ì—ì´ì „íŠ¸ê°€ ë§ì€ ë°˜ë³µì„ ìˆ˜í–‰í•˜ë©´ ë©”ëª¨ë¦¬ ì¦ê°€

**í•´ê²°:**
- ë©”ëª¨ë¦¬ ì´ˆê¸°í™” ë²„íŠ¼ ì‚¬ìš©
- `max_iterations` ê°’ ì¤„ì´ê¸°
- ì„œë²„ ì¬ì‹œì‘

---

## ğŸ”§ ì»¤ìŠ¤í„°ë§ˆì´ì§•

### ìƒˆë¡œìš´ ë„êµ¬ ì¶”ê°€

`backend/ai/agents/react_agent.py`ì˜ `_setup_tools()` ë©”ì„œë“œì— ì¶”ê°€:

```python
def _setup_tools(self) -> Dict[str, Any]:
    return {
        "web_search": {...},
        "calculator": {...},
        "new_tool": {  # ìƒˆ ë„êµ¬
            "name": "ìƒˆ ë„êµ¬ ì´ë¦„",
            "description": "ë„êµ¬ ì„¤ëª…",
            "function": self._new_tool_function
        }
    }

def _new_tool_function(self, input_str: str) -> str:
    # ë„êµ¬ ë¡œì§ êµ¬í˜„
    return result
```

### ìµœëŒ€ ë°˜ë³µ íšŸìˆ˜ ì¡°ì •

UIì—ì„œ ì„¤ì •í•˜ê±°ë‚˜, API ìš”ì²­ ì‹œ ì§€ì •:

```python
agent = get_react_agent(max_iterations=10)
```

### LLM ëª¨ë¸ ë³€ê²½

`backend/ai/agents/react_agent.py`ì—ì„œ:

```python
self.llm = ChatOpenAI(
    api_key=self.api_key,
    model="gpt-4",  # gpt-3.5-turboì—ì„œ gpt-4ë¡œ ë³€ê²½
    temperature=0.5
)
```

---

## ğŸ“Š ì„±ëŠ¥ ìµœì í™”

1. **ë°˜ë³µ íšŸìˆ˜ ì œí•œ**: ë„ˆë¬´ ë§ì€ ë°˜ë³µì€ ë¹„ìš© ì¦ê°€
2. **ëª¨ë¸ ì„ íƒ**: gpt-3.5-turboëŠ” ë¹ ë¥´ê³  ì €ë ´
3. **ìºì‹±**: ë™ì¼í•œ ì¿¼ë¦¬ëŠ” ê²°ê³¼ ìºì‹œ
4. **ë°°ì¹˜ ì²˜ë¦¬**: ì—¬ëŸ¬ ì§ˆë¬¸ì„ í•œë²ˆì— ì²˜ë¦¬

---

## ğŸ“– ì°¸ê³  ìë£Œ

- [ReAct Paper](https://arxiv.org/abs/2210.03629)
- [Tavily API ë¬¸ì„œ](https://tavily.com/api)
- [LangChain ë¬¸ì„œ](https://python.langchain.com/)
- [OpenAI API](https://platform.openai.com/docs)

---

## ğŸ’¡ ë‹¤ìŒ ë‹¨ê³„

- [ ] ë©”ëª¨ë¦¬ ì˜ì†ì„± (ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥)
- [ ] ì‚¬ìš©ìë³„ ë©”ëª¨ë¦¬ ê´€ë¦¬
- [ ] ì—ì´ì „íŠ¸ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
- [ ] ë” ë§ì€ ë„êµ¬ ì¶”ê°€
- [ ] ë©€í‹° ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ êµ¬ì¶•
